(function(a){'use strict';function b(){let a={};const e={ru:{days:["\u041F\u043D","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041F\u0442","\u0421\u0431","\u0412\u0441"],months:["\u042F\u043D\u0432\u0430\u0440\u044C","\u0424\u0435\u0432\u0440\u0430\u043B\u044C","\u041C\u0430\u0440\u0442","\u0410\u043F\u0440\u0435\u043B\u044C","\u041C\u0430\u0439","\u0418\u044E\u043D\u044C","\u0418\u044E\u043B\u044C","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C","\u041E\u043A\u0442\u044F\u0431\u0440\u044C","\u041D\u043E\u044F\u0431\u0440\u044C","\u0414\u0435\u043A\u0430\u0431\u0440\u044C"]},en:{days:["Mon","Tue","Wed","Thu","Fri","Sut","Sun"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},pl:{days:["Pon.","Wt.","\u015Ar.","Czw.","Pt.","Sob.","Niedz."],months:["Stycze\u0144","Luty","Marzec","Kwiecie\u0144","Maj","Czerwiec","Lipiec","Sierpie\u0144","Wrzesie\u0144","Pa\u017Adziernik","Listopad","Grudzie\u0144"]}};return a.init=function(a,e={}){({})!==e&&(c=Object.assign(c,e));let f="cursor: not-allowed;";1===c.weekend&&(f="cursor: pointer;");const g=document.getElementById(a);g.classList.add("calendar-wrapper");const h=`<div id="${c.idDivCal}"></div><input id="${c.inputId}" type="text" disabled><div id="cInsMessBlock"></div>`;g.insertAdjacentHTML("afterbegin",h);const i=new Date;c.currMonth=i.getMonth();const d=`<style>#${c.idDivCal}{background:#fff;width:${c.width};border-top: 1px solid;border-left: 1px solid;border-right: 1px solid;border-color: #ccc;border-radius: 5px 5px 0 0;}#${a}{width: ${c.width}}#${a} *{box-sizing: border-box}.c-calendar-head{display:flex;justify-content:space-between;margin-bottom:10px}.c-calendar-body{display:block}.c-calendar-body div.days {color: #28283b;font-size: 12px;}.c-calendar-body div.days,.c-calendar-body div.kod-line{display:flex;justify-content:space-around}.kod-line div{width:35px;line-height:35px;height:35px;text-align:center;border:1px solid transparent}#${c.inputId}{padding: 5px;border:1px solid #dadada;text-align:center;margin:0 auto 15px;width:100%;border-radius:0 0 5px 5px;display:block}#${c.btnPrev},#${c.btnNext}{font-size:18px;line-height: 16px;cursor:pointer;width:25px;height:25px;background:#fff;border:none;border-radius: 5px;}.c-calendar-body div.not-current{color:#ebebeb}.c-calendar-body div.normal{cursor:pointer;color:blue}.c-calendar-body div.c-weekend{${f} color: #ff5555;}.c-calendar-body div.today{font-weight:500;color:green;font-size:15px;}.c-calendar-body div.c-past-days{pointer-events:none;color:#b7b7b2}.c-calendar-body div.c-selected-days{border:1px solid blue}.c-calendar-head div{border:none;color:#28283b;font-size:16px}#cInsMessBlock{font-size:10px;border-radius:5px;padding:5px}</style>`;document.head.insertAdjacentHTML("beforeend",d),c.currYear=i.getFullYear(),c.currDay=i.getDate(),g.addEventListener("click",a=>{const d=a.target.id;d===c.btnNext?b().nextMonth(a):d===c.btnPrev?b().previousMonth(a):a.target.classList.contains("normal")?b().eventClick(a.target):a.target.classList.contains("c-weekend")&&1===c.weekend?b().eventClick(a.target):a.target.classList.contains("today")&&b().eventClick(a.target)}),b().showCurrent(),document.getElementById(c.inputId).value=b().customFormatDate(i.getDate())},a.eventClick=function(a){const e=a.innerHTML,f=new Date,g=new Date(c.currYear,c.currMonth,+e),h=document.getElementById("cInsMessBlock"),i=f.getHours(),j=f.getMinutes(),k=f.getDate().toString(),l=f.getMonth(),m=document.querySelectorAll(".k-days"),n=f.toLocaleDateString(),o=g.toLocaleDateString();if(g>=new Date)for(let a=0;a<m.length;a++){const b=m[a].innerHTML;b===e?m[a].classList.add("c-selected-days"):m[a].classList.remove("c-selected-days")}else if(n===o)for(let a=0;a<m.length;a++){const b=m[a].innerHTML;b===e?m[a].classList.add("c-selected-days"):m[a].classList.remove("c-selected-days")}const p=b().customFormatDate(e);document.getElementById(c.inputId).value=p,console.log("ch :"+i),h.innerHTML=k===e&&c.currMonth===l?9<=i&&17>=i?17===i&&30>=j?`<span style="color:orange">${c.message[c.lang].key2}</span>`:`<span style="color:green">${c.message[c.lang].key1}</span>`:0<=i&&8>=i?`<span style="color:green">${c.message[c.lang].key4}</span>`:`<span style="color:red">${c.message[c.lang].key3}</span>`:""},a.nextMonth=function(){11===c.currMonth?(c.currMonth=0,++c.currYear):++c.currMonth,b().showCurrent()},a.previousMonth=function(){0===c.currMonth?(c.currMonth=11,--c.currYear):--c.currMonth,b().showCurrent()},a.showCurrent=function(){b().showMonth(c.currYear,c.currMonth)},a.showMonth=function(a,f){let g=new Date,d=new Date(a,f,7).getDay(),h=new Date(a,f+1,0).getDate(),j=0===f?new Date(a-1,11,0).getDate():new Date(a,f,0).getDate(),l="<div class=\"c-calendar-head\">";l+=`<button id="${c.btnPrev}" type="button">&#8249;</button><div>${e[c.lang].months[f]}, ${a}</div><button id="${c.btnNext}" type="button">&#8250;</button></div>`,l+="<div class=\"c-calendar-body\">",l+="<div class=\"days\">";for(let b=0;b<e[c.lang].days.length;b++)l+="<div>"+e[c.lang].days[b]+"</div>";l+="</div>";let m=1;do{let b=new Date(a,f,m).getDay();if(1===b)l+="<div class=\"kod-line\">";else if(1===m){l+="<div class=\"kod-line\">";let a=j-d+1;for(let b=0;b<d;b++)l+="<div class=\"not-current\">"+a+"</div>",a++}let e=new Date,g=e.getMonth();if(l+=m===c.currDay&&g===c.currMonth?"<div class=\"k-days today\">"+m+"</div>":6===b||0===b?"<div class=\"k-days c-weekend\">"+m+"</div>":new Date(a,f,m)<new Date&&1===c.minDateToday?"<div class=\"k-days c-past-days\">"+m+"</div>":"<div class=\"k-days normal\">"+m+"</div>",0===b)l+="</div>";else if(m===h){let a=1;for(b;7>b;b++)l+="<div class=\"not-current\">"+a+"</div>",a++}m++}while(m<=h);l+="</div>",document.getElementById(c.idDivCal).innerHTML=l,b().setTodayDate()},a.setTodayDate=function(){const a=document.querySelectorAll(".c-calendar-tbody div");let b=0;const d=new Date().getDay();0===c.weekend&&6===d&&(b=2),0===c.weekend&&0===d&&(b=1);for(let e=0,d=a.length,f=new Date().getDate();e<d;)a[e].innerHTML===f.toString()&&new Date().getMonth()===c.currMonth&&a[e+b].classList.add("k-days","c-selected-days"),e++},a.getSettings=function(){return c},a.customFormatDate=function(a){return Date.prototype.format=function(a){const b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(let c in /(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},new Date(c.currYear,c.currMonth,a).format(c.formatDate)},a}let c={colorNext:"red",lang:"ru",minDateToday:1,weekend:0,idDivCal:"kMainDiv",btnNext:"btnNext",btnPrev:"btnPrev",inputId:"kodimValue",formatDate:"yyyy-MM-dd",width:"280px",message:{}};"undefined"==typeof a.kodimKalendar?a.kodimKalendar=b():console.error("error init")})(window);